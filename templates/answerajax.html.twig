<div class="answer">
{% for row in rules_arr %}
    <p>{{ row.rule.caption|e }}</p>
    {% if row.also|length >0 %}
        <p>
            <b>См. также:</b>
            {% for elem in row.also %}
                {% if loop.index>1 %}, {% endif %}
                <a href="{{ url('oneelement', {'typealias':elem.type.alias|e, 'elementalias': elem.alias|e}) }}">{{ elem.caption|e }}</a>
            {% endfor %}
        </p>
    {% endif %}
{% else %}
    <p>Нет никаких правил про сочетание
        "<a href="{{ url('oneelement', {'typealias':element1.type.alias|e, 'elementalias': element1.alias|e}) }}">{{ element1.caption|e }}</a>" и
        "<a href="{{ url('oneelement', {'typealias':element2.type.alias|e, 'elementalias': element2.alias|e}) }}">{{ element2.caption|e }}</a>"
    </p>
    {% if app.user %}<p><a class="btn btn-info"><span class="glyphicon glyphicon-plus"></span> Добавить</a></p>{% endif %}
{% endfor %}
</div>